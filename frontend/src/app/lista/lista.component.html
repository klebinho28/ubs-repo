<div class="container mt-4">
  <div class="alert alert-warning" *ngIf="mensagem">{{ mensagem }}</div>

  <div class="card">
    <div class="card-header bg-primary text-white">
      <h5 class="mb-0">Resultados da Pesquisa</h5>
    </div>
    <div class="card-body">
      <table class="table table-striped table-hover">
        <thead>
          <tr>
            <th>Código</th>
            <th>Nome</th>
            <th>CPF</th>
            <th>Nacionalidade</th>
            <th>Telefone Celular</th>
            <th>Data de Nascimento</th>
            <th>Email</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let paciente of pacientes">
            <td>{{ paciente.codigo || '-' }}</td>
            <td>{{ paciente.nomeCompleto || 'Não informado' }}</td>
            <td>{{ paciente.cpf || 'Não informado' }}</td>
            <td>{{ paciente.nacionalidade || 'Não informado' }}</td>
            <td>{{ paciente.telefoneCelular || 'Não informado' }}</td>
            <td>{{ paciente.dataNascimento ? (paciente.dataNascimento | date: 'dd/MM/yyyy') : 'Não informado' }}</td>
            <td>{{ paciente.email || 'Não informado' }}</td>
            <td>
              <button class="btn btn-warning btn-sm me-2" *ngIf="paciente.codigo" (click)="editar(paciente.codigo)">Editar</button>
              <button class="btn btn-danger btn-sm" *ngIf="paciente.codigo" (click)="remover(paciente.codigo)">Remover</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

  <div *ngIf="pacienteSelecionado" class="card mt-4">
    <div class="card-header bg-info text-white">
      <h5 class="mb-0">Editar Paciente</h5>
    </div>
    <div class="card-body">
      <form>
        <div class="row">
          <div class="form-group col-12">
            <label class="form-label">Nome Completo</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.nomeCompleto" required>
          </div>
          <div class="form-group col-12">
            <label class="form-label">Nome Social</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.nomeSocial">
          </div>
        </div>
        
        <div class="row">
          <div class="form-group col-12">
            <label class="form-label">CPF</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.cpf">
          </div>
          <div class="form-group col-12">
            <label class="form-label">Nome da Mãe</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.nomeMae">
          </div>
          <div class="form-group col-12">
            <label class="form-label">Nome do Pai</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.nomePai">
          </div>
        </div>
        
        <div class="row">
          <div class="form-group col-12">
            <label class="form-label">Data de Nascimento</label>
            <input type="date" class="form-control" [(ngModel)]="pacienteSelecionado.dataNascimento">
          </div>
          <div class="form-group col-12">
            <label class="form-label">Sexo</label>
            <select class="form-control" [(ngModel)]="pacienteSelecionado.sexo">
              <option value="Masculino">Masculino</option>
              <option value="Feminino">Feminino</option>
              <option value="Outro">Outro</option>
            </select>
          </div>
        </div>

        <div class="row">
          <div class="form-group col-12">
            <label class="form-label">Nacionalidade</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.nacionalidade">
          </div>

          <div class="form-group col-12">
            <label for="frequentaEscola">Frequenta escola?</label>
            <select id="frequentaEscola" class="form-control" [(ngModel)]="pacienteSelecionado.frequentaEscola">
              <option value="" disabled selected>Selecione...</option>
              <option value="Sim">Sim</option>
              <option value="Não">Não</option>
            </select>
          </div>

          <div class="form-group col-12">
            <label class="form-label">Município de Nascimento</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.municipioNascimento">
          </div>
        </div>

        <div class="form-group col-12">
          <label for="escolaridade">Escolaridade:</label>
          <input id="escolaridade" class="form-control" type="text" [(ngModel)]="pacienteSelecionado.Escolaridade" />
        </div>
     

      <div class="row">
        <div class="form-group col-12">
          <label for="estabelecimentoVinculo">Estabelecimento de Vínculo:</label>
          <input id="estabelecimentoVinculo" class="form-control" type="text" [(ngModel)]="pacienteSelecionado.estabelecimentoVinculo" required />
        </div>
        <div class="form-group col-12">
          <label for="estabelecimentoCadastro">Estabelecimento de Cadastro:</label>
          <input id="estabelecimentoCadastro" class="form-control" type="text" [(ngModel)]="pacienteSelecionado.estabelecimentoCadastro" required />
        </div>
      </div>

      <div class="form-group col-12">
        <label for="racaCor">Raça/Cor:</label>
        <select id="racaCor" class="form-control" [(ngModel)]="pacienteSelecionado.racaCor" required>
          <option value="" disabled selected>Selecione...</option>
          <option value="Branca">Branca</option>
          <option value="Preta">Preta</option>
          <option value="Parda">Parda</option>
          <option value="Amarela">Amarela</option>
          <option value="Indígena">Indígena</option>
        </select>
      </div>

      <div class="row mt-3">
        <!-- Deficiência -->
        <div class="form-group col-12">
          <label for="deficiente">Deficiente:</label>
          <select id="deficiente" class="form-control" [(ngModel)]="pacienteSelecionado.deficiente">
            <option value="" disabled selected>Selecione...</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
         
        </div>
      
        <!-- Deficiência Visual -->
        <div class="form-group col-12">
          <label for="visual">Deficiência Visual:</label>
          <select id="visual" class="form-control" [(ngModel)]="pacienteSelecionado.visual">
            <option value="" disabled selected>Selecione...</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>
      
      
      
      
        <!-- Deficiência Auditiva -->
        <div class="form-group col-12">
          <label for="auditiva">Deficiência Auditiva:</label>
          <select id="auditiva" class="form-control" [(ngModel)]="pacienteSelecionado.auditiva">
            <option value="" disabled selected>Selecione...</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>
      </div>
      
      <!-- Deficiência Motora e Intelectual -->
      <div class="row mt-3">
        <!-- Deficiência Motora -->
        <div class="form-group col-12">
          <label for="motora">Deficiência Motora:</label>
          <select id="motora" class="form-control" [(ngModel)]="pacienteSelecionado.motora">
            <option value="" disabled selected>Selecione...</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
          
        </div>
      
        <!-- Deficiência Intelectual -->
        <div class="form-group col-12">
          <label for="intelectual">Deficiência Intelectual:</label>
          <select id="intelectual" class="form-control" [(ngModel)]="pacienteSelecionado.intelectual">
            <option value="" disabled selected>Selecione...</option>
            <option value="Sim">Sim</option>
            <option value="Não">Não</option>
          </select>
        </div>
      </div>
    

    
        
        <div class="row">
          <div class="form-group col-12">
            <label class="form-label">Telefone Celular</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.telefoneCelular">
          </div>
          <div class="form-group col-12">
            <label class="form-label">Telefone Residencial</label>
            <input class="form-control" [(ngModel)]="pacienteSelecionado.telefoneResidencial">
          </div>
        </div>
        
        <div class="form-group col-12">
          <label class="form-label">Email</label>
          <input class="form-control" [(ngModel)]="pacienteSelecionado.email">
        </div>
        
        <div class="form-group col-12">
          <label class="form-label">Endereço</label>
          <input class="form-control" [(ngModel)]="pacienteSelecionado.endereco">
        </div>
      </form>
    </div>
  </div> <!-- card-body -->
  <div class="card-footer text-end">
    <button class="btn btn-success me-2" (click)="salvarEdicao(pacienteSelecionado)">Salvar</button>
    <button class="btn btn-secondary" (click)="cancelarEdicao()">Cancelar</button>
  </div>
</div>  <!-- card -->

